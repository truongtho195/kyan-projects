<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" x:Name="userControl"
             mc:Ignorable="d"
             x:Class="FlashCard.Views.StudyConfigView"
             HorizontalContentAlignment="Stretch"
             VerticalContentAlignment="Stretch"
             xmlns:attachedCmd="clr-namespace:AttachedCommandBehavior;assembly=AttachedCommandBehavior"
             Height="520"
             Width="778" FontSize="12" RenderTransformOrigin="0.5,0.5">
    <UserControl.Resources>
        <Style TargetType="{x:Type ListViewItem}"
               x:Key="ListViewItemCardStyle">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListViewItem}">
                    	<ControlTemplate.Resources>
                    		<Storyboard x:Key="CardSelected">
                    			<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[2].(RotateTransform.Angle)" Storyboard.TargetName="border_Copy">
                    				<EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="-2"/>
                    			</DoubleAnimationUsingKeyFrames>
                    			<DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[2].(RotateTransform.Angle)" Storyboard.TargetName="border_Copy2">
                    				<EasingDoubleKeyFrame KeyTime="0:0:0.3" Value="2"/>
                    			</DoubleAnimationUsingKeyFrames>
                    		</Storyboard>
                    	</ControlTemplate.Resources>
                        <Border x:Name="border"
                                CornerRadius="8"
                                BorderThickness="1"
                                Width="200"
                                Height="90"
                                Cursor="Hand">
                            <Grid x:Name="Layout"
                                  HorizontalAlignment="Stretch"
                                  Width="Auto">
                            	<Grid.RowDefinitions>
                            		<RowDefinition Height="0.54*"/>
                            		<RowDefinition Height="0.46*"/>
                            	</Grid.RowDefinitions>
                            	<Grid.ColumnDefinitions>
                            		<ColumnDefinition Width="0.731*"/>
                            		<ColumnDefinition Width="0.269*"/>
                            	</Grid.ColumnDefinitions>
                                <Border x:Name="border_Copy"
                                        CornerRadius="8"
                                        BorderThickness="1"
                                        Width="Auto"
                                        Height="Auto"
                                        Background="#F0293955"
                                        RenderTransformOrigin="0.035,0.071"
                                        Margin="5" Grid.ColumnSpan="2" Grid.RowSpan="2" >
                                	<Border.RenderTransform>
                                		<TransformGroup>
                                			<ScaleTransform/>
                                			<SkewTransform/>
                                			<RotateTransform/>
                                			<TranslateTransform/>
                                		</TransformGroup>
                                	</Border.RenderTransform>
                                </Border>
                                <Border x:Name="border_Copy1"
                                        CornerRadius="8"
                                        BorderThickness="1"
                                        Width="Auto"
                                        Height="Auto"
                                        Background="#FFE5E9BC"
                                        RenderTransformOrigin="0,0.5"
                                        Margin="5"
                                        Padding="0" Grid.ColumnSpan="2" Grid.RowSpan="2" />
                                <Border x:Name="border_Copy2"
                                        CornerRadius="8"
                                        Width="Auto"
                                        Height="Auto"
                                        Background="{DynamicResource bgColor1}"
                                        RenderTransformOrigin="0,0.5"
                                        Margin="5"
                                        BorderThickness="0.3" Grid.ColumnSpan="2" Grid.RowSpan="2">
                                	<Border.Effect>
                                		<DropShadowEffect BlurRadius="2" Direction="311" ShadowDepth="2"/>
                                	</Border.Effect>
                                    <Border.RenderTransform>
                                        <TransformGroup>
                                            <ScaleTransform />
                                            <SkewTransform />
                                            <RotateTransform Angle="0" />
                                            <TranslateTransform />
                                        </TransformGroup>
                                    </Border.RenderTransform>
                                </Border>
                                <Ellipse Fill="#FFCDE2F2" HorizontalAlignment="Left" Height="8.333" Margin="10,10,0,0" Stroke="White" VerticalAlignment="Top" Width="8.333"/>
                                <Path Grid.Column="1" Data="M158.94699,5.3333281 L192.6868,24.999833 192.68684,39.457713 136.93844,5.3129947 z" Fill="#FF00E2FF" Height="Auto" Margin="0.136,5.313,5.312,8.062" Stretch="Fill" StrokeThickness="0.1" VerticalAlignment="Stretch" Stroke="#FF727272"/>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                    		<Trigger Property="Selector.IsSelected" Value="True">
                    			<Trigger.ExitActions>
                    				<StopStoryboard BeginStoryboardName="CardSelected_BeginStoryboard"/>
                    			</Trigger.ExitActions>
                    			<Trigger.EnterActions>
                    				<BeginStoryboard x:Name="CardSelected_BeginStoryboard" Storyboard="{StaticResource CardSelected}"/>
                    			</Trigger.EnterActions>
                    			<Setter Property="Effect" TargetName="border_Copy2">
                    				<Setter.Value>
                    					<DropShadowEffect BlurRadius="2" Direction="311" ShadowDepth="0" Opacity="0"/>
                    				</Setter.Value>
                    			</Setter>
                    		</Trigger>
                    	</ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ListViewNoHeaderStyle"
               TargetType="{x:Type ListView}">
            <Setter Property="Background"
                    Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}" />
            <Setter Property="BorderBrush"
                    Value="{DynamicResource ListBorder}" />
            <Setter Property="BorderThickness"
                    Value="1" />
            <Setter Property="Foreground"
                    Value="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" />
            <Setter Property="ScrollViewer.HorizontalScrollBarVisibility"
                    Value="Auto" />
            <Setter Property="ScrollViewer.VerticalScrollBarVisibility"
                    Value="Auto" />
            <Setter Property="ScrollViewer.CanContentScroll"
                    Value="true" />
            <Setter Property="ScrollViewer.PanningMode"
                    Value="Both" />
            <Setter Property="Stylus.IsFlicksEnabled"
                    Value="False" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ListView}">
                        <Border x:Name="Bd"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="{TemplateBinding Background}"
                                SnapsToDevicePixels="true">
                            <ScrollViewer Padding="{TemplateBinding Padding}"
                                          Style="{DynamicResource ScrollViewerListViewNoHeaderStyle}"
                                          Margin="0">
                                <ItemsPresenter SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                            </ScrollViewer>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsGrouping"
                                     Value="true">
                                <Setter Property="ScrollViewer.CanContentScroll"
                                        Value="false" />
                            </Trigger>
                            <Trigger Property="IsEnabled"
                                     Value="false">
                                <Setter Property="Background"
                                        TargetName="Bd"
                                        Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style x:Key="ScrollViewerListViewNoHeaderStyle"
               TargetType="{x:Type ScrollViewer}">
            <Setter Property="Focusable"
                    Value="false" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                        <Grid Background="{TemplateBinding Background}"
                              SnapsToDevicePixels="true">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto" />
                                <RowDefinition />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <VisualStateManager.VisualStateGroups>
                                <VisualStateGroup x:Name="ValidationStates">
                                    <VisualState x:Name="Valid" />
                                    <VisualState x:Name="InvalidFocused" />
                                    <VisualState x:Name="InvalidUnfocused" />
                                </VisualStateGroup>
                            </VisualStateManager.VisualStateGroups>
                            <ScrollContentPresenter x:Name="PART_ScrollContentPresenter"
                                                    CanContentScroll="{TemplateBinding CanContentScroll}"
                                                    ContentTemplate="{TemplateBinding ContentTemplate}"
                                                    Content="{TemplateBinding Content}"
                                                    KeyboardNavigation.DirectionalNavigation="Local"
                                                    SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                                    d:LayoutOverrides="Width"
                                                    Grid.Row="1"
                                                    Grid.RowSpan="2"
                                                    Grid.ColumnSpan="2" />
                            <ScrollBar x:Name="PART_HorizontalScrollBar"
                                       Cursor="Arrow"
                                       Maximum="{TemplateBinding ScrollableWidth}"
                                       Minimum="0.0"
                                       Orientation="Horizontal"
                                       Grid.Row="2"
                                       Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                                       Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                       ViewportSize="{TemplateBinding ViewportWidth}"
                                       Style="{DynamicResource HorizontalScrollBarStyle}"
                                       Background="#58939393"
                                       Height="12"
                                       MinHeight="0" />
                            <ScrollBar x:Name="PART_VerticalScrollBar"
                                       Cursor="Arrow"
                                       Grid.Column="1"
                                       Maximum="{TemplateBinding ScrollableHeight}"
                                       Minimum="0.0"
                                       Orientation="Vertical"
                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                       Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                       ViewportSize="{TemplateBinding ViewportHeight}"
                                       Style="{DynamicResource VerticalScrollBarStyle}"
                                       Background="{DynamicResource bgScrollBard}"
                                       Width="12"
                                       HorizontalAlignment="Stretch"
                                       VerticalAlignment="Stretch"
                                       MinWidth="0"
                                       Grid.Row="1" />
                            <DockPanel Grid.Column="0"
                                       Grid.Row="2"
                                       LastChildFill="False">
                                <Rectangle DockPanel.Dock="Left"
                                           Fill="Transparent"
                                           Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                           Width="1" />
                                <Rectangle DockPanel.Dock="Top"
                                           Fill="Transparent"
                                           Height="1"
                                           Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" />
                            </DockPanel>
                            <ScrollViewer Focusable="false"
                                          HorizontalScrollBarVisibility="Hidden"
                                          VerticalScrollBarVisibility="Hidden"
                                          d:LayoutOverrides="Height"
                                          Grid.ColumnSpan="2">
                                <GridViewHeaderRowPresenter AllowsColumnReorder="{Binding TemplatedParent.View.AllowsColumnReorder, RelativeSource={RelativeSource TemplatedParent}}"
                                                            ColumnHeaderContainerStyle="{Binding TemplatedParent.View.ColumnHeaderContainerStyle, RelativeSource={RelativeSource TemplatedParent}}"
                                                            ColumnHeaderToolTip="{Binding TemplatedParent.View.ColumnHeaderToolTip, RelativeSource={RelativeSource TemplatedParent}}"
                                                            ColumnHeaderStringFormat="{Binding TemplatedParent.View.ColumnHeaderStringFormat, RelativeSource={RelativeSource TemplatedParent}}"
                                                            ColumnHeaderContextMenu="{Binding TemplatedParent.View.ColumnHeaderContextMenu, RelativeSource={RelativeSource TemplatedParent}}"
                                                            ColumnHeaderTemplate="{Binding TemplatedParent.View.ColumnHeaderTemplate, RelativeSource={RelativeSource TemplatedParent}}"
                                                            Columns="{Binding TemplatedParent.View.Columns, RelativeSource={RelativeSource TemplatedParent}}"
                                                            ColumnHeaderTemplateSelector="{Binding TemplatedParent.View.ColumnHeaderTemplateSelector, RelativeSource={RelativeSource TemplatedParent}}"
                                                            SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                                                            Visibility="Collapsed" />
                            </ScrollViewer>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
	<UserControl.RenderTransform>
		<TransformGroup>
			<ScaleTransform/>
			<SkewTransform/>
			<RotateTransform/>
			<TranslateTransform/>
		</TransformGroup>
	</UserControl.RenderTransform>
    <Grid x:Name="Layout">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.979*" />
            <ColumnDefinition Width="10" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="13.5" />
            <RowDefinition />
            <RowDefinition Height="30" />
            <RowDefinition Height="10" />
        </Grid.RowDefinitions>

        <Rectangle x:Name="rtShdB"
                   Grid.Row="3"
                   Margin="10,0,0,0">
            <Rectangle.Fill>
                <LinearGradientBrush EndPoint="0.498,0.979"
                                     StartPoint="0.498,0.033">
                    <GradientStop Color="#7F000000"
                                  Offset="0.249" />
                    <GradientStop Color="#00000000"
                                  Offset="0.87" />
                </LinearGradientBrush>
            </Rectangle.Fill>
        </Rectangle>
        <Rectangle x:Name="rtShdR"
                   Margin="0"
                   Grid.Column="1"
                   Grid.RowSpan="3">
            <Rectangle.Fill>
                <LinearGradientBrush EndPoint="0.958,0.5"
                                     StartPoint="0.038,0.5">
                    <GradientStop Color="#7F000000" />
                    <GradientStop Color="#00000000"
                                  Offset="0.774" />
                </LinearGradientBrush>
            </Rectangle.Fill>
        </Rectangle>
        <Rectangle x:Name="rtShdBR"
                   Grid.Row="3"
                   Grid.Column="1"
                   Margin="-0.125,0,0.125,0">
            <Rectangle.Fill>
                <RadialGradientBrush RadiusY="0.552"
                                     RadiusX="0.552"
                                     GradientOrigin="0.314,0.686">
                    <RadialGradientBrush.RelativeTransform>
                        <TransformGroup>
                            <ScaleTransform CenterY="0.5"
                                            CenterX="0.5"
                                            ScaleY="1.816"
                                            ScaleX="1.903" />
                            <SkewTransform AngleY="0"
                                           AngleX="0"
                                           CenterY="0.5"
                                           CenterX="0.5" />
                            <RotateTransform Angle="90"
                                             CenterY="0.5"
                                             CenterX="0.5" />
                            <TranslateTransform X="-0.44"
                                                Y="-0.49" />
                        </TransformGroup>
                    </RadialGradientBrush.RelativeTransform>
                    <GradientStop Color="#00000000"
                                  Offset="0.763" />
                    <GradientStop Color="Black"
                                  Offset="0.143" />
                </RadialGradientBrush>
            </Rectangle.Fill>
        </Rectangle>

        <Border BorderBrush="Black"
                Grid.RowSpan="3"
                Background="{DynamicResource brBackgroundColor}" />
        <Border x:Name="bdHeader">
            <Border.Background>
                <LinearGradientBrush EndPoint="0.5,1"
                                     StartPoint="0.5,0">
                    <GradientStop Offset="0.461" />
                    <GradientStop Color="#F9474646"
                                  Offset="0.104" />
                </LinearGradientBrush>
            </Border.Background>
            <TextBlock x:Name="tbTitle"
                       Text="{Binding Titles}"
                       TextWrapping="Wrap"
                       FontWeight="Bold"
                       Foreground="White"
                       VerticalAlignment="Center"
                       HorizontalAlignment="Left"
                       Margin="5,0,0,0" />
        </Border>
        <Grid x:Name="grdLayout"
              Grid.Row="1">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="0.32*" />
                <ColumnDefinition Width="0.68*" />
            </Grid.ColumnDefinitions>
            <Grid.RowDefinitions>
                <RowDefinition Height="0" />
                <RowDefinition Height="204.5" />
                <RowDefinition Height="0.111*" />
                <RowDefinition Height="0.889*" />
            </Grid.RowDefinitions>
            <GroupBox Header="More Option"
                      BorderBrush="#FF3F7EE4"
                      Grid.Row="1"
                      Grid.Column="1"
                      Margin="5,0,8,0"
                      Padding="5,0,8,0">
                <Grid>
                	<Grid.ColumnDefinitions>
                		<ColumnDefinition Width="0.579*"/>
                		<ColumnDefinition Width="0.421*"/>
                	</Grid.ColumnDefinitions>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="25" />
                        <RowDefinition Height="25.54" />
                        <RowDefinition Height="54.46"/>
                        <RowDefinition Height="25" />
                        <RowDefinition Height="25" />
                        <RowDefinition Height="25" />
                    </Grid.RowDefinitions>
                    <StackPanel Orientation="Horizontal"
                                Margin="5,0,22.549,0" d:LayoutOverrides="Width">
                        <CheckBox x:Name="chkLimitCard"
                                  IsChecked="{Binding SelectedSetupModel.IsLimitCard, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  Content="Limit to"
                                  VerticalAlignment="Center"
                                  d:LayoutOverrides="Width" />
                        <TextBox x:Name="txtLimitCard"
                                 Validation.ErrorTemplate="{DynamicResource validationTemplate}"
                                 Text="{Binding SelectedSetupModel.LimitCardNum, Mode=TwoWay, NotifyOnValidationError=True, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                 IsEnabled="{Binding IsChecked, ElementName=chkLimitCard}"
                                 VerticalAlignment="Center"
                                 Width="40"
                                 Height="20"
                                 Margin="3,0,0,0" />
                        <TextBlock TextWrapping="Wrap"
                                   Text="card(s) during this session"
                                   VerticalAlignment="Center"
                                   Margin="2,0,0,0" />
                    </StackPanel>
                    <CheckBox Content="Lesson for next Study"
                    	IsChecked="{Binding SelectedSetupModel.IsOpenLastStudy, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    	Grid.Row="5" d:LayoutOverrides="Width, Height" Margin="5,0,0,0" VerticalAlignment="Center" />
                    <Grid VerticalAlignment="Top"
                          Grid.Row="1" Grid.ColumnSpan="2" Grid.RowSpan="2">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="25" />
                            <RowDefinition Height="25" />
                            <RowDefinition Height="25" />
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="0.067*" />
                            <ColumnDefinition Width="0.933*" />
                        </Grid.ColumnDefinitions>

                        <CheckBox x:Name="chkEnableSlideShow"
                                  IsChecked="{Binding SelectedSetupModel.IsEnableSlideShow, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                  Content="Enable Slide Show card"
                                  VerticalAlignment="Center"
                                  d:LayoutOverrides="Width"
                                  Grid.ColumnSpan="2"
                                  Margin="5,0,0,0" />
                        <StackPanel Grid.Column="1"
                                    HorizontalAlignment="Left"
                                    Orientation="Horizontal"
                                    Grid.Row="2"
                                    Margin="5,0,0,0"
                                    VerticalAlignment="Center">
                            <TextBox x:Name="txtDistanceTime"
                                     Text="{Binding SelectedSetupModel.DistanceTimeSecond, Mode=TwoWay, NotifyOnValidationError=True, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     IsEnabled="{Binding IsChecked, ElementName=chkEnableSlideShow}"
                                     Validation.ErrorTemplate="{DynamicResource validationTemplate}"
                                     TextWrapping="Wrap"
                                     VerticalAlignment="Center"
                                     Height="19.277"
                                     Width="35" />

                            <TextBlock x:Name="tbDistanceTime"
                                       TextWrapping="Wrap"
                                       Text="second(s) distance time"
                                       VerticalAlignment="Center"
                                       Margin="5,0,0,0" />
                        </StackPanel>
                        <StackPanel Grid.Column="1"
                                    HorizontalAlignment="Left"
                                    Margin="5,2.862,0,2.862"
                                    Orientation="Horizontal"
                                    Grid.Row="1">
                            <TextBox x:Name="txtViewTime"
                                     Text="{Binding SelectedSetupModel.ViewTimeSecond, Mode=TwoWay, NotifyOnValidationError=True, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True}"
                                     IsEnabled="{Binding IsChecked, ElementName=chkEnableSlideShow}"
                                     Validation.ErrorTemplate="{DynamicResource validationTemplate}"
                                     TextWrapping="Wrap"
                                     Width="35"
                                     VerticalAlignment="Center" />

                            <TextBlock x:Name="tbViewTime"
                                       TextWrapping="Wrap"
                                       Text="second(s) to view"
                                       VerticalAlignment="Center"
                                       Margin="5,0,0,0" />
                        </StackPanel>

                    </Grid>
                    <CheckBox Content="Loop until to end"
                              IsEnabled="False"
                              IsChecked="{Binding SelectedSetupModel.IsEnableLoop}"
                              HorizontalAlignment="Left"
                              Grid.Row="3" d:LayoutOverrides="Height" Margin="5,0,0,0" />
                    <CheckBox Content="Shuffle card before study"
                              IsChecked="{Binding SelectedSetupModel.IsShuffle, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              Grid.Row="4" d:LayoutOverrides="Width, Height" Margin="5,0,0,0" VerticalAlignment="Center" />
                    <CheckBox Content="Sound when popup show"
                              IsChecked="{Binding SelectedSetupModel.IsEnableSoundForShow, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                              Grid.Row="1" d:LayoutOverrides="Width, Height" Grid.Column="1" VerticalAlignment="Center" />
                    <CheckBox Content="Speech after poup show"
                    	IsChecked="{Binding SelectedSetupModel.SpeechWhenShow, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" d:LayoutOverrides="Width" Grid.Column="1" VerticalAlignment="Center" Margin="-0.001,0,0,0" />
                </Grid>
            </GroupBox>
            <ListView x:Name="lstCate"
                      ItemsSource="{Binding CardCollection}"
                      SelectedItem="{Binding SelectedCard}"
                      Grid.Row="1"
                      Margin="8,8,6,8"
                      FontSize="13.333"
                      Style="{StaticResource ListViewNoHeaderStyle}"
                      Grid.RowSpan="3"
                      ItemContainerStyle="{DynamicResource ListViewItemCardStyle}"
                      Background="#33CCC7C7" BorderBrush="{DynamicResource ListBorder}">
                <ListView.View>
                    <GridView ColumnHeaderContainerStyle="{DynamicResource GridViewColumnHeaderStyle}" />


                </ListView.View>
            </ListView>
            <ListView x:Name="lstLessons"
                      ItemsSource="{Binding SelectedCard.LessonCollection}"
                      Grid.Row="3"
                      FontSize="13.333"
                      Style="{DynamicResource ListViewStyle}"
                      Grid.Column="1"
                      Margin="3,8,8,8"
                      Background="#33CCC7C7">
                <ListView.View>
                    <GridView ColumnHeaderContainerStyle="{DynamicResource GridViewColumnHeaderStyle}">
                        <GridViewColumn Header="#"
                                        Width="25">
                            <GridViewColumn.HeaderTemplate>
                                <DataTemplate>
                                    <CheckBox VerticalAlignment="Center"
                                              HorizontalAlignment="Center"
                                              Command="{Binding DataContext.CheckedCommand, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}"
                                              CommandParameter="Parent"
                                              IsChecked="{Binding DataContext.SelectedCard.CheckedAll, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}" />
                                </DataTemplate>
                            </GridViewColumn.HeaderTemplate>
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox VerticalAlignment="Center"
                                              HorizontalAlignment="Center"
                                              Command="{Binding DataContext.CheckedCommand, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}"
                                              CommandParameter="Child"
                                              IsChecked="{Binding IsChecked}" />
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                        <GridViewColumn Header="Lesson Name"
                                        Width="300"
                                        DisplayMemberBinding="{Binding Lesson.LessonName}" />


                    </GridView>
                </ListView.View>
            </ListView>
            <StackPanel HorizontalAlignment="Right"
                        Orientation="Horizontal"
                        Grid.Row="2"
                        Grid.Column="1"
                        d:LayoutOverrides="Height"
                        VerticalAlignment="Center"
                        Margin="0,0,8,0">
                <TextBlock TextWrapping="Wrap"
                           d:LayoutOverrides="Width"
                           Text="{Binding TotalLesson, Mode=OneWay, UpdateSourceTrigger=PropertyChanged}"
                           Margin="0,0,4,0"
                           FontWeight="Bold" />
                <TextBlock TextWrapping="Wrap"
                           Text=" lesson(s) choice"
                           FontWeight="Bold" />
            </StackPanel>
            <Button Content="Get Last Lesson" HorizontalAlignment="Left" Grid.Row="2" Grid.Column="1" d:LayoutOverrides="Height" Style="{DynamicResource EmptyButton}" Margin="8,0,0,0" VerticalAlignment="Center" Foreground="#FF062CFF" FontWeight="Bold" Command="{Binding GetLastLessonCommand}"/>
        </Grid>
        <Border x:Name="bdBottom"
                Grid.Row="2"
                Background="#FFA1C4F3"
                Height="30"
                VerticalAlignment="Bottom"
                Margin="1,0,1,1"
                Padding="0">
            <StackPanel Orientation="Horizontal"
                        HorizontalAlignment="Right"
                        Margin="0,0,5,0">
                <Button x:Name="btnOk"
                        Command="{Binding OKCommand}"
                        Content="OK"
                        Width="75"
                        VerticalAlignment="Center"
                        HorizontalAlignment="Center"
                        Height="20"
                        Margin="0,0,8,0"
                        IsDefault="True" />

                <Button x:Name="btnCancel"
                        Command="{Binding CancelCommand}"
                        Content="Cancel"
                        Width="75"
                        Height="20"
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center" />
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
