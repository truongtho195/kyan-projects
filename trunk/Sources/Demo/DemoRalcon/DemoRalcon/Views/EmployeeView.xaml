<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Luna"
             xmlns:command="clr-namespace:DemoFalcon.Commands"
             xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity"
             mc:Ignorable="d"
             xmlns:converter="clr-namespace:DemoFalcon.Converters"
             x:Class="DemoFalcon.Views.EmployeeView">
    <UserControl.Resources>
        <!--#Region Converter-->
        <converter:ReverseBooleanConverter x:Key="reverseBooleanConverter" />
        <!--#EndRegion Converter-->
        <Style x:Key="ButtonFocusVisual2">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate>
                        <Rectangle Margin="3"
                                   SnapsToDevicePixels="true"
                                   Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}"
                                   StrokeThickness="1"
                                   StrokeDashArray="1 2" />
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <LinearGradientBrush x:Key="ButtonNormalBackgroundFill"
                             EndPoint="0.5,1"
                             StartPoint="0.5,0">
            <GradientStop Color="#FFFFFFFF"
                          Offset="0" />
            <GradientStop Color="#FFF0F0EA"
                          Offset="0.9" />
        </LinearGradientBrush>
        <SolidColorBrush x:Key="ButtonBorder"
                         Color="#FF003C74" />
        <Style x:Key="{x:Static GridView.GridViewScrollViewerStyleKey}"
               TargetType="{x:Type ScrollViewer}">
            <Setter Property="Focusable"
                    Value="false" />
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollViewer}">
                        <Grid Background="{TemplateBinding Background}"
                              SnapsToDevicePixels="true">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*" />
                                <ColumnDefinition Width="Auto" />
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="*" />
                                <RowDefinition Height="Auto" />
                            </Grid.RowDefinitions>
                            <DockPanel Margin="{TemplateBinding Padding}">
                                <ScrollViewer DockPanel.Dock="Top"
                                              Focusable="false"
                                              HorizontalScrollBarVisibility="Hidden"
                                              VerticalScrollBarVisibility="Hidden">
                                    <GridViewHeaderRowPresenter AllowsColumnReorder="{Binding TemplatedParent.View.AllowsColumnReorder, RelativeSource={RelativeSource TemplatedParent}}"
                                                                ColumnHeaderContainerStyle="{Binding TemplatedParent.View.ColumnHeaderContainerStyle, RelativeSource={RelativeSource TemplatedParent}}"
                                                                ColumnHeaderToolTip="{Binding TemplatedParent.View.ColumnHeaderToolTip, RelativeSource={RelativeSource TemplatedParent}}"
                                                                ColumnHeaderStringFormat="{Binding TemplatedParent.View.ColumnHeaderStringFormat, RelativeSource={RelativeSource TemplatedParent}}"
                                                                ColumnHeaderContextMenu="{Binding TemplatedParent.View.ColumnHeaderContextMenu, RelativeSource={RelativeSource TemplatedParent}}"
                                                                ColumnHeaderTemplate="{Binding TemplatedParent.View.ColumnHeaderTemplate, RelativeSource={RelativeSource TemplatedParent}}"
                                                                Columns="{Binding TemplatedParent.View.Columns, RelativeSource={RelativeSource TemplatedParent}}"
                                                                ColumnHeaderTemplateSelector="{Binding TemplatedParent.View.ColumnHeaderTemplateSelector, RelativeSource={RelativeSource TemplatedParent}}"
                                                                SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                </ScrollViewer>
                                <ScrollContentPresenter x:Name="PART_ScrollContentPresenter"
                                                        CanContentScroll="{TemplateBinding CanContentScroll}"
                                                        ContentTemplate="{TemplateBinding ContentTemplate}"
                                                        Content="{TemplateBinding Content}"
                                                        KeyboardNavigation.DirectionalNavigation="Local"
                                                        SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                            </DockPanel>
                            <ScrollBar x:Name="PART_HorizontalScrollBar"
                                       Cursor="Arrow"
                                       Maximum="{TemplateBinding ScrollableWidth}"
                                       Minimum="0.0"
                                       Orientation="Horizontal"
                                       Grid.Row="1"
                                       Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}"
                                       Value="{Binding HorizontalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                       ViewportSize="{TemplateBinding ViewportWidth}" />
                            <ScrollBar x:Name="PART_VerticalScrollBar"
                                       Cursor="Arrow"
                                       Grid.Column="1"
                                       Maximum="{TemplateBinding ScrollableHeight}"
                                       Minimum="0.0"
                                       Orientation="Vertical"
                                       Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                       Value="{Binding VerticalOffset, Mode=OneWay, RelativeSource={RelativeSource TemplatedParent}}"
                                       ViewportSize="{TemplateBinding ViewportHeight}" />
                            <DockPanel Background="{Binding Background, ElementName=PART_VerticalScrollBar}"
                                       Grid.Column="1"
                                       LastChildFill="false"
                                       Grid.Row="1">
                                <Rectangle DockPanel.Dock="Left"
                                           Fill="White"
                                           Visibility="{TemplateBinding ComputedVerticalScrollBarVisibility}"
                                           Width="1" />
                                <Rectangle DockPanel.Dock="Top"
                                           Fill="White"
                                           Height="1"
                                           Visibility="{TemplateBinding ComputedHorizontalScrollBarVisibility}" />
                            </DockPanel>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="295" />
            <ColumnDefinition Width="13" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="30" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <DataGrid x:Name="dgEmployee"
                  ItemsSource="{Binding EmployeeCollection}"
                  AutoGenerateColumns="False"
                  Grid.Row="1"
                  Margin="0"
                  RowHeight="25"
                  RowHeaderWidth="0"
                  ScrollViewer.HorizontalScrollBarVisibility="Visible"
                  ScrollViewer.VerticalScrollBarVisibility="Visible"
                  ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle}"
                  Background="#FFD4D4D4"
                  FontWeight="Bold"
                  Foreground="#FF5C5C5C"
                  CanUserAddRows="False"
                  CanUserDeleteRows="False"
                  RowStyle="{DynamicResource DataGridRowStyle}"
                  CellStyle="{DynamicResource DataGridCellStyle}"
                  ItemsPanel="{DynamicResource ItemsPanelTemplate}"
                  BorderBrush="White"
                  HorizontalGridLinesBrush="{x:Null}"
                  VerticalGridLinesBrush="#FF7E7E7E"
                  AlternatingRowBackground="#FFF3F3F3"
                  SelectedItem=""
                  RowBackground="#FFDEDEDE"
                  Style="{DynamicResource DataGridStyle}">
            <i:Interaction.Triggers>
                <i:EventTrigger EventName="SelectionChanged">
                    <command:EventToCommand Command="{Binding SelectionChangedCommand}"
                                            CommandParameter="{Binding Path=SelectedItem,ElementName=dgEmployee,Mode=OneWay}" />
                </i:EventTrigger>
            </i:Interaction.Triggers>


            <DataGrid.Columns>
                <DataGridTemplateColumn Header="Họ Tên"
                                        MinWidth="100"
                                        IsReadOnly="True">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock>
                                <Run Text="{Binding FirstName}" />
                                <Run Text="{Binding MiddleName}" />
                                <Run Text="{Binding LastName}" />
                            </TextBlock>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>

                <DataGridTextColumn Header="Ngày Sinh"
                                    IsReadOnly="True"
                                    Width="80"
                                    Binding="{Binding BirthDate,StringFormat=d}" />
                <DataGridTemplateColumn Header="Giới Tính"
                                        IsReadOnly="True"
                                                                                >
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox ItemsSource="{Binding DataContext.GenderCollection, RelativeSource={RelativeSource AncestorType={x:Type UserControl}, Mode=FindAncestor}}"
                                      SelectedValue="{Binding Gender}"
                                      Width="80"
									  Foreground="{DynamicResource TextBrush2}"
									  Style="{DynamicResource EmptyComboBox}"
									  IsReadOnly="True"
									  IsEnabled="False"
                                      SelectedValuePath="ID"
                                      DisplayMemberPath="Name"
                                      />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>




            </DataGrid.Columns>
        </DataGrid>

        <StackPanel x:Name="stFilter"
                    Orientation="Horizontal"
                    Background="#FFBABABA">
            <TextBlock Text="Fitler :"
                       VerticalAlignment="Center"
                       Width="32"
                       HorizontalAlignment="Left" />
            <TextBox x:Name="txtFitler"
                     MinWidth="150"
                     MinHeight="25"
                     Height="25"
                     Margin="0,2.5"
                     HorizontalAlignment="Left">
                <i:Interaction.Triggers>
                    <i:EventTrigger EventName="TextChanged">
                        <command:EventToCommand Command="{Binding FilterTextChangedCommand}"
                                                CommandParameter="{Binding Path=Text,ElementName=txtFitler}" />
                    </i:EventTrigger>
                </i:Interaction.Triggers>
            </TextBox>
        </StackPanel>
        <StackPanel x:Name="stControl"
                    Grid.Column="2"
                    Height="25"
                    Orientation="Horizontal"
                    Grid.ColumnSpan="2"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Margin="0,0,10,0">
            <Button x:Name="btnNew"
                    Command="{Binding NewItemCommand}"
                    Content="Thêm"
                    Width="80"
                    FontWeight="Bold"
                    Style="{DynamicResource MetroButtonStyle}"
                    Height="25"
                    HorizontalContentAlignment="Center"
                    VerticalContentAlignment="Center"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    Foreground="#FF565656"
                    Margin="0,1" />
            <Button x:Name="btnSave"
                    Command="{Binding SaveCommand}"
                    Content="Lưu"
                    Width="80"
                    Margin="10,1,0,1"
                    FontWeight="Bold"
                    Foreground="#FF565656"
                    Style="{DynamicResource MetroButtonStyle}"
                    HorizontalContentAlignment="Center"
                    VerticalContentAlignment="Center"
                    Height="25"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center" />
            <Button x:Name="btnDelete"
                    Command="{Binding DeleteCommand}"
                    Content="Xóa"
                    Width="80"
                    Margin="10,1,0,1"
                    FontWeight="Bold"
                    Foreground="#FF565656"
                    Style="{DynamicResource MetroButtonStyle}"
                    Height="25"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center" />
        </StackPanel>
        <GroupBox Header="Thông tin nhân viên"
                  d:LayoutOverrides="Width, Height"
                  Grid.Row="1"
                  Grid.Column="2"
                  Margin="0,5,5,5">
            <Grid x:Name="grEdit"
                  IsEnabled="{Binding UnLockForm,Mode=OneWay,UpdateSourceTrigger=PropertyChanged}">
                <Grid.RowDefinitions>
                    <RowDefinition Height="10" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition Height="30" />
                    <RowDefinition />
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="100.8" />
                    <ColumnDefinition />
                </Grid.ColumnDefinitions>
                <Label x:Name="lblFirstName"
                       Content="Họ :"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Center"
                       Grid.Row="1"
                       Foreground="{DynamicResource TextBrush2}"
                       FontWeight="Bold" />
                <Label x:Name="lbMiddleName"
                       Content="Tên Đệm :"
                       HorizontalAlignment="Left"
                       Grid.Row="1"
                       Foreground="{DynamicResource TextBrush2}"
                       FontWeight="Bold"
                       Grid.Column="1"
                       Margin="198,3.361,0,3.36"
                       d:LayoutOverrides="Height" />
                <Label x:Name="lblLastName"
                       Content="Tên :"
                       HorizontalAlignment="Left"
                       Grid.Row="2"
                       FontWeight="Bold"
                       Foreground="#FF565656"
                       d:LayoutOverrides="Height"
                       VerticalAlignment="Center" />
                <Label x:Name="lblGender"
                       Content="Giới Tính :"
                       HorizontalAlignment="Left"
                       Grid.Row="2"
                       FontWeight="Bold"
                       Foreground="#FF565656"
                       Grid.Column="1"
                       Margin="207,3.723,0,3"
                       d:LayoutOverrides="Height" />
                <Label x:Name="lblBirthDate"
                       Content="Ngày Sinh : "
                       HorizontalAlignment="Left"
                       Grid.Row="3"
                       FontWeight="Bold"
                       Foreground="#FF565656"
                       d:LayoutOverrides="Height"
                       VerticalAlignment="Center" />
                <Label x:Name="lblPhone"
                       Content="Số điện thoại :"
                       HorizontalAlignment="Left"
                       Grid.Row="4"
                       FontWeight="Bold"
                       Foreground="#FF565656"
                       d:LayoutOverrides="Height"
                       VerticalAlignment="Center" />
                <Label x:Name="lblEmail"
                       Content="Email :"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Center"
                       Grid.Row="5"
                       FontWeight="Bold"
                       Foreground="#FF565656" />
                <Label x:Name="lblAddress"
                       Content="Địa chỉ tạm trú :"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Center"
                       Grid.Row="6"
                       FontWeight="Bold"
                       Foreground="#FF565656" />
                <Label x:Name="lblHomeTown"
                       Content="Quê quán :"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Center"
                       Grid.Row="7"
                       FontWeight="Bold"
                       Foreground="#FF565656" />
                <Label x:Name="lblNote"
                       Content="Ghi Chú :"
                       HorizontalAlignment="Left"
                       VerticalAlignment="Top"
                       Grid.Row="8"
                       FontWeight="Bold"
                       Foreground="#FF565656" />
                <TextBox x:Name="txtFirstName"
                         Text="{Binding SelectedItem.FirstName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,NotifyOnValidationError=True,ValidatesOnDataErrors=True}"
                         HorizontalAlignment="Left"
                         Grid.Row="1"
                         Grid.Column="1"
                         VerticalAlignment="Center"
                         Width="190"
                         Height="25"
                         BorderBrush="#FF90A1B1"
                         d:LayoutOverrides="HorizontalAlignment" />
                <TextBox x:Name="txtMiddleName"
                         Text="{Binding SelectedItem.MiddleName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,NotifyOnValidationError=True,ValidatesOnDataErrors=True}"
                         HorizontalAlignment="Left"
                         Grid.Row="1"
                         Grid.Column="1"
                         Width="98"
                         BorderBrush="#FF90A1B1"
                         VerticalAlignment="Center"
                         Margin="268,0,0,0" />
                <TextBox x:Name="txtLastName"
                         Text="{Binding SelectedItem.LastName,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,NotifyOnValidationError=True,ValidatesOnDataErrors=True}"
                         HorizontalAlignment="Left"
                         Grid.Row="2"
                         Grid.Column="1"
                         Width="200"
                         BorderBrush="#FF90A1B1"
                         VerticalAlignment="Center"
                         Height="25" />
                <ComboBox x:Name="cmbGender"
                          ItemsSource="{Binding GenderCollection}"
                          SelectedValue="{Binding SelectedItem.Gender,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged}"
                          DisplayMemberPath="Name"
                          SelectedValuePath="ID"
                          Grid.Row="2"
                          Grid.Column="1"
                          Width="91.283"
                          HorizontalAlignment="Left"
                          Height="25"
                          Style="{DynamicResource MetroComboxStyle}"
                          Margin="274,2,0,3">
                </ComboBox>
                <DatePicker x:Name="dpBirthDate"
                            SelectedDate="{Binding SelectedItem.BirthDate,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,NotifyOnValidationError=True,ValidatesOnDataErrors=True}"
                            Grid.Row="3"
                            Grid.Column="1"
                            Width="161"
                            Height="25"
                            HorizontalAlignment="Left"
                            VerticalAlignment="Center"
                            d:LayoutOverrides="HorizontalAlignment" />
                <TextBox x:Name="txtPhone"
                         Text="{Binding SelectedItem.Phone,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,NotifyOnValidationError=True,ValidatesOnDataErrors=True}"
                         HorizontalAlignment="Left"
                         MaxLength="30"
                         Grid.Row="4"
                         Grid.Column="1"
                         Width="200"
                         BorderBrush="#FF90A1B1"
                         Margin="0,1.5,0,3.5"
                         VerticalAlignment="Center"
                         Height="25" />
                <TextBox x:Name="txtEmail"
                         Text="{Binding SelectedItem.Email,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,NotifyOnValidationError=True,ValidatesOnDataErrors=True}"
                         HorizontalAlignment="Left"
                         Grid.Row="5"
                         Grid.Column="1"
                         VerticalAlignment="Center"
                         Width="200"
                         Height="25"
                         BorderBrush="#FF90A1B1" />
                <TextBox x:Name="txtAddress"
                         Text="{Binding SelectedItem.Address,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,NotifyOnValidationError=True,ValidatesOnDataErrors=True}"
                         HorizontalAlignment="Left"
                         MaxLength="100"
                         Grid.Row="6"
                         Grid.Column="1"
                         VerticalAlignment="Center"
                         Width="369.283"
                         Height="25"
                         BorderBrush="#FF90A1B1" />
                <ComboBox x:Name="cmbHomeTown"
                          ItemsSource="{Binding CountryCollection}"
                          SelectedValue="{Binding SelectedItem.CountryID,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,NotifyOnValidationError=True,ValidatesOnDataErrors=True}"
                          SelectedValuePath="CountryID"
                          DisplayMemberPath="CountryName"
                          Grid.Row="7"
                          Grid.Column="1"
                          Width="200"
                          HorizontalAlignment="Left"
                          Height="25"
                          Margin="0,2.5"
                          Style="{DynamicResource MetroComboxStyle}" />
                <TextBox x:Name="txtNote"
                         Text="{Binding SelectedItem.Note,Mode=TwoWay,UpdateSourceTrigger=PropertyChanged,NotifyOnValidationError=True,ValidatesOnDataErrors=True}"
                         MaxLength="200"
                         TextWrapping="Wrap"
                         Grid.Row="8"
                         Grid.Column="1"
                         Margin="0,5,5,5"
                         BorderBrush="#FF90A1B1" />
            </Grid>
        </GroupBox>
        <Rectangle Grid.Column="1"
                   Grid.RowSpan="2"
                   Width="7"
                   HorizontalAlignment="Left"
                   Margin="0,0,0.5,0">
            <Rectangle.Fill>
                <LinearGradientBrush EndPoint="1.685,0.5"
                                     StartPoint="-0.982,0.5">
                    <GradientStop Color="Black"
                                  Offset="0.17" />
                    <GradientStop Offset="0.792" />
                </LinearGradientBrush>
            </Rectangle.Fill>
        </Rectangle>

    </Grid>
</UserControl>
