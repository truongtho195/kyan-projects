<UserControl xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             xmlns:customTextbox="clr-namespace:CPCToolkitExt.TextBoxControl"
             xmlns:Microsoft_Windows_Themes="clr-namespace:Microsoft.Windows.Themes;assembly=PresentationFramework.Luna"
             x:Class="CPCToolkitExt.AddressControl.Address"
             x:Name="UserControl"
             FontSize="11"
             FontFamily="Tahoma"
             BorderBrush="#FFA0A0A0">
    <UserControl.Resources>
        <Style BasedOn="{StaticResource {x:Type customTextbox:TextBox}}"
               TargetType="{x:Type customTextbox:TextBox}"
               x:Key="TextBoxAddressStyle">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type customTextbox:TextBox}">
                        <Border x:Name="Bd"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Background="{TemplateBinding Background}"
                                SnapsToDevicePixels="true">
                            <ScrollViewer x:Name="PART_ContentHost"
                                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                        </Border>
                        <ControlTemplate.Triggers>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsFocused"
                                               Value="True" />
                                </MultiTrigger.Conditions>
                                <Setter Property="Background"
                                        TargetName="Bd"
                                        Value="{Binding FocusingBrush, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type customTextbox:TextBox}}}" />
                                <Setter Property="BorderThickness"
                                        TargetName="Bd"
                                        Value="1" />
                            </MultiTrigger>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="IsFocused"
                                               Value="True" />
                                    <Condition Property="IsReadOnly"
                                               Value="False" />
                                    <Condition Property="IsInsideControl"
                                               Value="True" />
                                </MultiTrigger.Conditions>
                                <Setter Property="Height"
                                        Value="25"></Setter>
                                <Setter Property="Background"
                                        TargetName="Bd"
                                        Value="Transparent" />
                                <Setter Property="BorderThickness"
                                        TargetName="Bd"
                                        Value="0" />

                            </MultiTrigger>
                            <Trigger Property="Validation.HasError"
                                     Value="True">
                                <Setter Property="BorderBrush"
                                        TargetName="Bd"
                                        Value="#FFFF0000" />
                            </Trigger>
                            <Trigger Property="IsEnabled"
                                     Value="false">
                                <Setter Property="Background"
                                        TargetName="Bd"
                                        Value="{DynamicResource {x:Static SystemColors.ControlBrushKey}}" />
                                <Setter Property="Foreground"
                                        Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}" />
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>
    <Grid x:Name="grdAddress"
          ScrollViewer.VerticalScrollBarVisibility="Disabled">
        <Grid.RowDefinitions>
            <RowDefinition Height="24" />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="{Binding AddressTypeWidth,ElementName=UserControl}" />
            <ColumnDefinition Width="{Binding ContentAddressWidth,ElementName=UserControl}" />
        </Grid.ColumnDefinitions>
        <TextBlock x:Name="tblAddress"
                   FontFamily="Tahoma"
                   FontSize="11"
                   Grid.Row="0"
                   Foreground="{DynamicResource TextBlockNormalForeground}"
                   VerticalAlignment="Center"
                   HorizontalAlignment="Left" />
        <Grid x:Name="grdAddressType"
              Grid.ColumnSpan="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto" />
                <ColumnDefinition Width="Auto" />
            </Grid.ColumnDefinitions>
            <ComboBox x:Name="cmbAddress"
                      FontFamily="Tahoma"
                      FontSize="11"
                      BorderThickness="0"
                      ItemsSource="{Binding TypeCollection,ElementName=UserControl}"
                      DisplayMemberPath="Name"
                      SelectedItem="{Binding SelectedItemAddress,ElementName=UserControl}"
                      MinHeight="20"
                      MinWidth="70"
                      Style="{DynamicResource myComboBoxAddressStyle}" />
        </Grid>
        <customTextbox:TextBox x:Name="txtAddress"
                               FontFamily="Tahoma"
                               FontSize="11"
                               TextWrapping="Wrap"
                               Cursor="Hand"
                               IsReadOnly="True"
                               Style="{StaticResource TextBoxAddressStyle}"
                               HorizontalScrollBarVisibility="Disabled"
                               VerticalScrollBarVisibility="Disabled"
                               Text="{Binding MyText,ElementName=UserControl, NotifyOnValidationError=True, UpdateSourceTrigger=PropertyChanged, ValidatesOnDataErrors=True, ValidatesOnExceptions=True}"
                               HorizontalContentAlignment="Stretch"
                               VerticalContentAlignment="Stretch"
                               BorderThickness="1"
                               BorderBrush="{Binding BorderBrush, ElementName=UserControl}"
                               Grid.RowSpan="2"
                               Grid.Column="1" />
    </Grid>
</UserControl>